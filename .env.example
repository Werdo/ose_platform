# ════════════════════════════════════════════════════════════════════════════
# OSE PLATFORM - ARCHIVO DE CONFIGURACIÓN
# ════════════════════════════════════════════════════════════════════════════
#
# INSTRUCCIONES:
# 1. Copia este archivo como ".env" en la raíz del proyecto
# 2. Rellena TODOS los valores marcados con "RELLENAR_AQUI"
# 3. NUNCA subas el archivo .env al repositorio (ya está en .gitignore)
#
# ════════════════════════════════════════════════════════════════════════════

# ────────────────────────────────────────────────────────────────────────────
# APLICACIÓN - CONFIGURACIÓN GENERAL
# ────────────────────────────────────────────────────────────────────────────

APP_NAME=OSE Platform
APP_VERSION=1.0.0
APP_DESCRIPTION=Sistema de Gestión, Trazabilidad y Post-Venta - Oversun Energy
ENVIRONMENT=development
# Valores permitidos: development, staging, production

DEBUG=True
# Valores permitidos: True, False (en producción usar False)

API_PREFIX=/api/v1
# Prefijo para todas las rutas de la API

# ────────────────────────────────────────────────────────────────────────────
# SERVIDOR - CONFIGURACIÓN DE HOST Y PUERTO
# ────────────────────────────────────────────────────────────────────────────

# Puerto donde escuchará el backend (dentro del contenedor)
BACKEND_PORT=8000

# Host del backend (dejar como 0.0.0.0 para Docker)
BACKEND_HOST=0.0.0.0

# Puerto expuesto externamente (para acceder desde navegador)
EXTERNAL_PORT=8000


# ────────────────────────────────────────────────────────────────────────────
# MONGODB - BASE DE DATOS
# ────────────────────────────────────────────────────────────────────────────

# Nombre de la base de datos principal
MONGODB_DB_NAME=oversun_production

# Usuario root de MongoDB (para administración)
MONGODB_ROOT_USER=RELLENAR_AQUI
# Ejemplo: admin_oversun

MONGODB_ROOT_PASSWORD=RELLENAR_AQUI
# Ejemplo: P@ssw0rd_Secure_2025!

# Usuario de aplicación (con permisos readWrite)
MONGODB_APP_USER=RELLENAR_AQUI
# Ejemplo: oversun_api

MONGODB_APP_PASSWORD=RELLENAR_AQUI
# Ejemplo: ApiUser_2025_Secure!

# Usuario de solo lectura (para reportes/dashboards)
MONGODB_READONLY_USER=RELLENAR_AQUI
# Ejemplo: oversun_readonly

MONGODB_READONLY_PASSWORD=RELLENAR_AQUI
# Ejemplo: ReadOnly_2025!

# Puerto de MongoDB (interno Docker)
MONGODB_PORT=27017

# URI de conexión completa (se construye automáticamente)
MONGODB_URI=mongodb://${MONGODB_APP_USER}:${MONGODB_APP_PASSWORD}@mongodb:27017/${MONGODB_DB_NAME}?authSource=admin

# Timeout de conexión (en milisegundos)
MONGODB_TIMEOUT=5000


# ────────────────────────────────────────────────────────────────────────────
# JWT - AUTENTICACIÓN Y TOKENS
# ────────────────────────────────────────────────────────────────────────────

# Clave secreta para firmar los JWT (GENERAR UNA CLAVE ÚNICA Y SEGURA)
JWT_SECRET_KEY=RELLENAR_AQUI
# Ejemplo: openssl rand -hex 32
# Genera algo como: 7f8a9b2c3d4e5f6a7b8c9d0e1f2a3b4c5d6e7f8a9b0c1d2e3f4a5b6c7d8e9f0a

# Algoritmo de firma JWT
JWT_ALGORITHM=HS256
# Valores recomendados: HS256, HS384, HS512

# Duración del access token (en minutos)
JWT_ACCESS_TOKEN_EXPIRE_MINUTES=30
# Recomendado: 15-60 minutos

# Duración del refresh token (en días)
JWT_REFRESH_TOKEN_EXPIRE_DAYS=7
# Recomendado: 7-30 días

# Emisor del token
JWT_ISSUER=oversun-platform
# Nombre de tu aplicación


# ────────────────────────────────────────────────────────────────────────────
# SEGURIDAD - CONTRASEÑAS Y ENCRIPTACIÓN
# ────────────────────────────────────────────────────────────────────────────

# Secreto para encriptación adicional (opcional pero recomendado)
ENCRYPTION_SECRET_KEY=RELLENAR_AQUI
# Ejemplo: openssl rand -hex 32

# Nivel de complejidad para bcrypt (8-12 recomendado)
PASSWORD_HASH_ROUNDS=10

# Longitud mínima de contraseña
PASSWORD_MIN_LENGTH=8


# ────────────────────────────────────────────────────────────────────────────
# CORS - CONFIGURACIÓN DE ORÍGENES PERMITIDOS
# ────────────────────────────────────────────────────────────────────────────

# Lista de orígenes permitidos (separados por coma)
CORS_ORIGINS=http://localhost:3000,http://localhost:5173,http://localhost:8080,http://127.0.0.1:3000
# Añadir aquí los dominios de tus frontends

# Permitir credenciales (cookies, auth headers)
CORS_ALLOW_CREDENTIALS=True

# Métodos HTTP permitidos
CORS_ALLOW_METHODS=GET,POST,PUT,PATCH,DELETE,OPTIONS

# Headers permitidos
CORS_ALLOW_HEADERS=*


# ────────────────────────────────────────────────────────────────────────────
# EMAIL - SERVIDOR SMTP PARA NOTIFICACIONES
# ────────────────────────────────────────────────────────────────────────────

# Habilitar envío de emails
EMAIL_ENABLED=True
# Valores permitidos: True, False

# Servidor SMTP
SMTP_HOST=RELLENAR_AQUI
# Ejemplos:
#   Gmail: smtp.gmail.com
#   Outlook: smtp.office365.com
#   Custom: mail.tudominio.com

SMTP_PORT=RELLENAR_AQUI
# Ejemplos:
#   587 (TLS - recomendado)
#   465 (SSL)
#   25 (sin encriptación - NO recomendado)

# Usar TLS
SMTP_TLS=True
# Valores permitidos: True, False

# Usar SSL
SMTP_SSL=False
# Valores permitidos: True, False
# NOTA: Si usas SSL, SMTP_TLS debe ser False

# Usuario de correo (email completo)
SMTP_USER=RELLENAR_AQUI
# Ejemplo: notificaciones@oversun.com

# Contraseña del correo
SMTP_PASSWORD=RELLENAR_AQUI
# Para Gmail: usar "App Password" (contraseña de aplicación)
# https://support.google.com/accounts/answer/185833

# Email remitente (FROM)
EMAIL_FROM=RELLENAR_AQUI
# Ejemplo: "OSE Platform <notificaciones@oversun.com>"

# Email de respuesta (REPLY-TO)
EMAIL_REPLY_TO=RELLENAR_AQUI
# Ejemplo: soporte@oversun.com

# Emails de copia para administración (separados por coma)
EMAIL_ADMIN_COPY=RELLENAR_AQUI
# Ejemplo: admin@oversun.com,logistica@oversun.com

# Timeout de conexión SMTP (segundos)
SMTP_TIMEOUT=10


# ────────────────────────────────────────────────────────────────────────────
# RATE LIMITING - LÍMITES DE PETICIONES
# ────────────────────────────────────────────────────────────────────────────

# Habilitar rate limiting
RATE_LIMIT_ENABLED=True

# Peticiones permitidas por minuto (global)
RATE_LIMIT_PER_MINUTE=60

# Peticiones permitidas por hora (por IP)
RATE_LIMIT_PER_HOUR=1000


# ────────────────────────────────────────────────────────────────────────────
# ARCHIVOS - CONFIGURACIÓN DE UPLOADS
# ────────────────────────────────────────────────────────────────────────────

# Tamaño máximo de archivo (en MB)
MAX_FILE_SIZE_MB=10

# Tipos de archivo permitidos para importación
ALLOWED_FILE_TYPES=.xlsx,.xls,.csv

# Ruta de almacenamiento temporal
TEMP_UPLOAD_PATH=/tmp/ose_uploads


# ────────────────────────────────────────────────────────────────────────────
# LOGGING - CONFIGURACIÓN DE LOGS
# ────────────────────────────────────────────────────────────────────────────

# Nivel de logging
LOG_LEVEL=INFO
# Valores permitidos: DEBUG, INFO, WARNING, ERROR, CRITICAL

# Formato de logs
LOG_FORMAT=json
# Valores permitidos: json, text

# Guardar logs en archivo
LOG_TO_FILE=True

# Ruta de archivo de logs
LOG_FILE_PATH=/var/log/ose/app.log


# ────────────────────────────────────────────────────────────────────────────
# APLICACIONES ESPECÍFICAS - CONFIGURACIÓN POR APP
# ────────────────────────────────────────────────────────────────────────────

# App 1 - Notificación de Series
APP1_ENABLED=True
APP1_CSV_FORMAT_DEFAULT=unified
# Valores permitidos: unified (una columna), separated (dos columnas)

# App 2 - Importación de Datos
APP2_ENABLED=True
APP2_AUTO_VALIDATE=True
APP2_ALLOW_DUPLICATES=False

# App 3 - RMA & Tickets
APP3_ENABLED=True
APP3_AUTO_ASSIGN_TECHNICIAN=False
APP3_SLA_HOURS_CRITICAL=4
APP3_SLA_HOURS_HIGH=24
APP3_SLA_HOURS_MEDIUM=72
APP3_SLA_HOURS_LOW=168

# App 4 - Import Transform
APP4_ENABLED=True

# App 5 - Factura Ticket
APP5_ENABLED=True

# App 6 - Picking Palets
APP6_ENABLED=True


# ────────────────────────────────────────────────────────────────────────────
# INTEGRACIONES EXTERNAS (FUTURO)
# ────────────────────────────────────────────────────────────────────────────

# API de transportistas (Seur, Correos, etc.)
SEUR_API_KEY=RELLENAR_CUANDO_SEA_NECESARIO
SEUR_API_URL=https://api.seur.com/v1

CORREOS_API_KEY=RELLENAR_CUANDO_SEA_NECESARIO
CORREOS_API_URL=https://api.correos.es/v1


# ────────────────────────────────────────────────────────────────────────────
# DESARROLLO Y DEBUG
# ────────────────────────────────────────────────────────────────────────────

# Recargar automáticamente en cambios (solo desarrollo)
AUTO_RELOAD=True

# Mostrar SQL queries en logs (solo desarrollo)
SHOW_QUERIES=False

# Seed data en inicio (solo desarrollo)
SEED_DATABASE=False


# ════════════════════════════════════════════════════════════════════════════
# FIN DE CONFIGURACIÓN
# ════════════════════════════════════════════════════════════════════════════
